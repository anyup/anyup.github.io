import{_ as i,c as a,I as n,aU as p,o as l,E as h}from"./chunks/framework.CpXV_ol5.js";const m=JSON.parse('{"title":"ECharts-GL 实现世界级、国家级、省市级 3D 地图","description":"","frontmatter":{"title":"ECharts-GL 实现世界级、国家级、省市级 3D 地图"},"headers":[],"relativePath":"zh/blog/large-screen/ECharts-GL实现世界级、国家级、省市级3D地图.md","filePath":"zh/blog/large-screen/ECharts-GL实现世界级、国家级、省市级3D地图.md","lastUpdated":1725430080000}'),t={name:"zh/blog/large-screen/ECharts-GL实现世界级、国家级、省市级3D地图.md"},k=p(`<h1 id="echarts-gl-实现世界级、国家级、省市级-3d-地图" tabindex="-1">ECharts-GL 实现世界级、国家级、省市级 3D 地图 <a class="header-anchor" href="#echarts-gl-实现世界级、国家级、省市级-3d-地图" aria-label="Permalink to &quot;ECharts-GL 实现世界级、国家级、省市级 3D 地图&quot;">​</a></h1><h2 id="一-前言" tabindex="-1">一. 前言 <a class="header-anchor" href="#一-前言" aria-label="Permalink to &quot;一. 前言&quot;">​</a></h2><p>在数据可视化领域，二维地图早已司空见惯，它以直观的方式呈现数据关系，帮助我们理解复杂的信息。然而，在追求更优（高大上）用户体验的今天，传统的二维展示方式已经不满足客户的体验需求，同时平面图表也难以充分展现地理信息的丰富维度和空间关系。于是，三维数据可视化越来越受到广大用户的青睐。</p><p><strong>ECharts-GL</strong>，作为 ECharts 家族的一员，更是专为三维数据可视化而生，它不仅继承了 ECharts 的易用性和高性能，还引入了 <strong>WebGL</strong> 技术，为用户提供了一个强大且直观的工具，用于创建令人惊叹的 3D 地图和数据可视化作品。</p><p>本篇文章，你将学习到如何利用 ECharts-GL 构建沉浸式的 3D 地图体验。并学习如何配置和定制地图的部分细节，包括<strong>地形、光照、视角</strong>以及<strong>纹理</strong>的三维表示。</p><p>通过本篇文章，你将学习到以下内容：</p><ul><li>基础 3D 地图的实现逻辑</li><li>丰富 3D 地图的配置项</li><li>世界级、国家级、省市区级别 3D 地图展示</li></ul><p>本篇文章既是 3D 地图的扫盲篇章，也是开启你从二维地图迈向三维世界的开端，让你从零到一，循序渐进的完整实现各种 3D 地图的渲染！</p><p>预览效果图如下图所示：</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c36d11244cdc49c68668020018f823ad~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&amp;h=528&amp;s=1779696&amp;e=gif&amp;f=142&amp;b=040829" alt="map3D1.gif"></p><h2 id="二-准备-geojson-数据" tabindex="-1">二. 准备 geoJson 数据 <a class="header-anchor" href="#二-准备-geojson-数据" aria-label="Permalink to &quot;二. 准备 geoJson 数据&quot;">​</a></h2><p>首先，我们需要准备多层级的地图数据，比如世界、国家、省份、城市等各级别的地理数据，以及每个区域对应的数据指标，这些数据通常是以 JSON 格式提供的地理信息数据。同时，确保数据格式符合 ECharts 的要求，可以参考官方文档了解各种地图类型的数据格式。</p><p>我们可以在一些其他网站获取最新的 geoJson，比如：我是通过<a href="https://datav.aliyun.com/portal/school/atlas/area_selector" target="_blank" rel="noreferrer">阿里云 DataV 数据可视化平台</a>下载最新的 json 数据文件，以保证目前所有市区的数据都是最新的。</p><p>如下图所示，选择数据版本后，点击页面上的下载按钮后即可以下载 json 文件:</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dbc0e54a906f465c9e337ba8984b20f8~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1190&amp;h=678&amp;s=268279&amp;e=png&amp;b=f9f6f3" alt="image.png"></p><p>也可以使用在线的 JSON API 接口获取数据，API 地址：</p><p><code>https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=100000_full</code></p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8c5a07a861de462fb54971aa194b7641~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1594&amp;h=478&amp;s=49642&amp;e=png&amp;b=f3f4f6" alt="image.png"></p><p>注意：<strong>如遇 403 Forbidden 错误，请参考文章</strong>：<a href="https://juejin.cn/post/7388072384349650959" target="_blank" rel="noreferrer">巧用 meta 标签，设置 referrer 解决 403 Forbidden 问题</a></p><p>因为后面我会逐步实现世界级、国家级、城市级的 3D 地图，所以在这里我准备了这几个 json 文件，可以通过在线 API 获取：</p><ul><li><p>世界地图 geoJson：<a href="https://code.juejin.cn/api/raw/7376489234334482483?id=7376489234334531635" target="_blank" rel="noreferrer">https://code.juejin.cn/api/raw/7376489234334482483?id=7376489234334531635</a></p></li><li><p>中国地图 geoJson：<code>https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=100000_full</code></p></li><li><p>山东省地图 geoJson：<code>https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=370000_full</code></p></li><li><p>青岛市地图 geoJson：<code>https://geo.datav.aliyun.com/areas_v3/bound/geojson?code=370200_full</code></p></li></ul><p>准备好以上地图数据，接下来我们继续进行，最终实现世界地图，中国地图，山东省地图，青岛市地图等 3D 地图展示。</p><h2 id="三-初步实现-3d-地图" tabindex="-1">三. 初步实现 3D 地图 <a class="header-anchor" href="#三-初步实现-3d-地图" aria-label="Permalink to &quot;三. 初步实现 3D 地图&quot;">​</a></h2><p>以中国地图 - 3D 地图的实现为例，接下来我们一步一步进行从零到一逐步丰富地图的显示</p><h3 id="_1-加载-geojson-数据" tabindex="-1">1. 加载 geoJson 数据 <a class="header-anchor" href="#_1-加载-geojson-数据" aria-label="Permalink to &quot;1. 加载 geoJson 数据&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> geoJson</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;获取的的中国地图json&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myChart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;main&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 注册地图名字(china)和数据(geoJson)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echarts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, geoJson)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 图表配置项</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置图表实例的配置项以及数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">myChart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(option)</span></span></code></pre></div><p>通过以上最基础的代码，就可以渲染出最基础的 3D 中国地图，如下图所示：</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7fe58580d00a40eea54f74f615315b84~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=898&amp;h=594&amp;s=54365&amp;e=png&amp;b=f8f8f8" alt="image.png"></p><h3 id="_2-设置地图的颜色" tabindex="-1">2. 设置地图的颜色 <a class="header-anchor" href="#_2-设置地图的颜色" aria-label="Permalink to &quot;2. 设置地图的颜色&quot;">​</a></h3><p><code>itemStyle</code> 主要用来设置三维地图中三维图形的视觉属性，包括颜色，透明度，描边等。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 地图的颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      itemStyle: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#286ECA&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 地图板块的颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        opacity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 图形的不透明度 [ default: 1 ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        borderWidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// (地图板块间的分隔线)图形描边的宽度。加上描边后可以更清晰的区分每个区域</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        borderColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#286ECA&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 图形描边的颜色。[ default: #333 ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b9d35d5d6d8407ab472eaf43c7bf799~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&amp;h=600&amp;s=73209&amp;e=png&amp;b=ffffff" alt="image.png"></p><h3 id="_3-设置标签显示" tabindex="-1">3. 设置标签显示 <a class="header-anchor" href="#_3-设置标签显示" aria-label="Permalink to &quot;3. 设置标签显示&quot;">​</a></h3><p><code>label</code> 主要用来配置地图上的城市名称是否显示标签，同时对标签的显示格式、显示样式进行配置</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 标签的相关设置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      label: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        show: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// (地图上的城市名称)是否显示标签</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        distance: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        formatter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39; &#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        textStyle: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // 标签的字体样式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#fff&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 地图初始化区域字体颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          fontSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 字体大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3f665aa2c2e4f46bb3f8510e793c3a9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&amp;h=609&amp;s=102950&amp;e=png&amp;b=ffffff" alt="image.png"></p><h3 id="_4-设置鼠标-hover-高亮效果" tabindex="-1">4. 设置鼠标 hover 高亮效果 <a class="header-anchor" href="#_4-设置鼠标-hover-高亮效果" aria-label="Permalink to &quot;4. 设置鼠标 hover 高亮效果&quot;">​</a></h3><p><code>emphasis</code> 主要用来设置鼠标 hover 高亮时图形和标签的样式 (当鼠标放上去时 label 和 itemStyle 的样式)</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 鼠标 hover 高亮时图形和标签的样式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      emphasis: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        label: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // label 高亮时的配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          show: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          textStyle: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#fff&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 高亮时标签颜色变为 白色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            fontSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 高亮时标签字体 变大</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        itemStyle: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // itemStyle 高亮时的配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#66ffff&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 高亮时地图板块颜色改变</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b57688cbe004c05879339cee897e3ce~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&amp;h=578&amp;s=156673&amp;e=gif&amp;f=33&amp;b=fefefe" alt="map3D-2.gif"></p><h3 id="_5-设置-tootip" tabindex="-1">5. 设置 tootip <a class="header-anchor" href="#_5-设置-tootip" aria-label="Permalink to &quot;5. 设置 tootip&quot;">​</a></h3><p><code>tooltip</code> 为提示框组件，它的设置属于 <code>ECharts</code> 的基础配置项，提示框组件可以设置在多种地方，主要作用为当鼠标鼠标悬浮到地图上时，提示框浮层的显示效果，详细配置参考文档：<a href="https://echarts.apache.org/zh/option.html#tooltip" target="_blank" rel="noreferrer">ECharts tooltip</a></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tooltip: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    trigger: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;item&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    position: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;inside&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    formatter: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{b}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    backgroundColor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rgba(50, 50, 50, 0.7)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    textStyle: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#FFFFFF&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      textalign: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;center&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fontSize: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;12px&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/671e166bcf5f43a6bd0ad15cd4eb413a~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&amp;h=578&amp;s=287447&amp;e=gif&amp;f=37&amp;b=fefefe" alt="map3D-3.gif"></p><h2 id="四-丰富-3d-地图的配置" tabindex="-1">四. 丰富 3D 地图的配置 <a class="header-anchor" href="#四-丰富-3d-地图的配置" aria-label="Permalink to &quot;四. 丰富 3D 地图的配置&quot;">​</a></h2><h3 id="_1-环境贴图" tabindex="-1">1. 环境贴图 <a class="header-anchor" href="#_1-环境贴图" aria-label="Permalink to &quot;1. 环境贴图&quot;">​</a></h3><p>环境贴图 <code>environment</code> 主要支持 3 种配置方式，支持纯颜色值，渐变色，全景贴图的 url。默认为 &#39;auto&#39;</p><p>简单说：环境贴图可以看作是地图的底层背景。</p><ul><li>配置为全景贴图 <ul><li><code>environment: &#39;asset/environment.png&#39;</code></li></ul></li><li>配置为纯黑色的背景 <ul><li><code>environment: &#39;#000&#39;</code></li></ul></li><li>配置为垂直渐变的背景 <ul><li>通过 <code>new echarts.graphic.LinearGradient</code> 来配置</li></ul></li></ul><blockquote><p>注意：在配置有 <code>light.ambientCubemap.texture</code> 的时候会使用该纹理作为环境贴图。否则不显示环境贴图。</p></blockquote><p>在这里，我们使用垂直渐变的背景色来配置</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 环境贴图，支持純颜色值，渐变色，全景贴图的 url。默认为 &#39;auto&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      environment: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echarts.graphic.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LinearGradient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 配置为垂直渐变的背景</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            offset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#183890&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 天空颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            offset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#040829&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 地面颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            offset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#040829&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 地面颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1aef174f4584b069e87ac8ab268e02b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1540&amp;h=1116&amp;s=330290&amp;e=png&amp;b=0c1354" alt="image.png"></p><h3 id="_2-设置地面" tabindex="-1">2. 设置地面 <a class="header-anchor" href="#_2-设置地面" aria-label="Permalink to &quot;2. 设置地面&quot;">​</a></h3><p><code>groundPlane</code> 主要用来配置地面，可以让整个组件有个“摆放”的地方，从而使整个场景看起来更真实，更有模型感。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 地面可以使整个场景看起来更真实，更有模型感。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      groundPlane: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        show: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 是否显示地面</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#aaa&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 地面颜色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8afa9f1afba47fc80e97b447014214d~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1908&amp;h=1104&amp;s=270735&amp;e=png&amp;b=8f8f8f" alt="image.png"></p><h3 id="_3-设置光照" tabindex="-1">3. 设置光照 <a class="header-anchor" href="#_3-设置光照" aria-label="Permalink to &quot;3. 设置光照&quot;">​</a></h3><p><code>light</code> 主要用来配置关照，主要有：场景主光源、全局环境光等，合理的光照设置能够让整个场景的明暗变得更丰富，更有层次。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 光照相关的设置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      light: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        main: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // 场景主光源的设置，在 globe 组件中就是太阳光。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#3D94CE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 主光源的颜色。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          intensity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 主光源的强度。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          shadow: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 主光源是否投射阴影。默认关闭。开启阴影可以给场景带来更真实和有层次的光照效果。会增加程序的运行开销。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          shadowQuality: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;high&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 阴影的质量。可选&#39;low&#39;, &#39;medium&#39;, &#39;high&#39;, &#39;ultra&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          alpha: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">55</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 主光源绕 x 轴，即上下旋转的角度。配合 beta 控制光源的方向。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          beta: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 主光源绕 y 轴，即左右旋转的角度。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ambient: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // 全局的环境光设置。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;red&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 环境光的颜色。[ default: #fff ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          intensity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 环境光的强度。[ default: 0.2 ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e376d3f0cd60462f98c16ebc781a06b9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1480&amp;h=1162&amp;s=320616&amp;e=png&amp;b=0c1351" alt="image.png"></p><blockquote><p>注意：在 shading 为 &#39;color&#39; 的时候无效。 光照的设置会影响到组件以及组件所在坐标系上的所有图表。</p></blockquote><h3 id="_4-设置视角控制" tabindex="-1">4. 设置视角控制 <a class="header-anchor" href="#_4-设置视角控制" aria-label="Permalink to &quot;4. 设置视角控制&quot;">​</a></h3><p><code>viewControl</code> 的配置主要用于鼠标的旋转，缩放等视角控制。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      viewControl: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        projection: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;perspective&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 投影方式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        autoRotate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 是否开启视角绕物体的自动旋转查看</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        autoRotateDirection: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cw&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 物体自传的方向。默认是 &#39;cw&#39;，也可以取 &#39;ccw&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        autoRotateSpeed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 物体自传的速度。角度 / 秒</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        autoRotateAfterStill: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在鼠标静止操作后恢复自动旋转的时间间隔</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        damping: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 鼠标进行旋转，缩放等操作时的迟滞因子</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        distance: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">120</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认视角距离主体的距离</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        alpha: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 视角绕 x 轴，即上下旋转的角度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        beta: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 视角绕 y 轴，即左右旋转的角度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        center: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 视角中心点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        animation: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 是否开启动画</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        animationDurationUpdate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 过渡动画的时长</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        animationEasingUpdate: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cubicInOut&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 过渡动画的缓动效果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>以上代码设置了开启了自动旋转，如下图所示：</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcec04dc526247518d86ea67ec1fb107~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&amp;h=578&amp;s=1614323&amp;e=gif&amp;f=46&amp;b=122271" alt="map3D-4.gif"></p><h3 id="_5-设置纹理" tabindex="-1">5. 设置纹理 <a class="header-anchor" href="#_5-设置纹理" aria-label="Permalink to &quot;5. 设置纹理&quot;">​</a></h3><p>在使用 <code>echarts-gl</code> 绘制 3D 地图时，为了增强地图的真实感，你可以设置纹理和光照效果。同时配合 <code>light</code> 和 <code>postEffect</code> 使用可以让展示的画面效果和质感有质的提升。</p><p>下面我们具体来看一下简单示例：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  series: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;map3D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      map: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;china&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 三维图形的着色效果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      shading: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;realistic&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 真实感材质相关的配置项</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      realisticMaterial: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        detailTexture: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./img/texture.png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 纹理图片</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        textureTiling: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 后处理特效</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      postEffect: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        enable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SSAO: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          enable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          radius: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          intensity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          quality: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;high&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        bloom: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          enable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          strength: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          radius: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          threshold: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        FXAA: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          enable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          alpha: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 光照设置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      light: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        main: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#3D94CE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          intensity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          shadow: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          shadowQuality: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;high&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          alpha: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">55</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          beta: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ambient: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          color: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#fff&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          intensity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dbb3ccd81a3c4019be22c8e8ff904f92~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1652&amp;h=1160&amp;s=1316302&amp;e=png&amp;b=aaa9a9" alt="image.png"></p><h2 id="五-显示不同级别的-3d-地图" tabindex="-1">五. 显示不同级别的 3D 地图 <a class="header-anchor" href="#五-显示不同级别的-3d-地图" aria-label="Permalink to &quot;五. 显示不同级别的 3D 地图&quot;">​</a></h2><p>通过上面的配置，地图的渲染效果已经逐渐有了效果还算不错的 3D 雏形，如果后续我们想要更好的视觉效果，可以参考官方文档配置项，一步步开发更加震撼的 3D 效果。</p><p>有了以上的配置项之后，接下来我们看一下如何进行渲染不同级别的地图，主要原理在于：根据不同的 geoJson 渲染不同的地图模型即可。</p><h3 id="_1-世界级别" tabindex="-1">1. 世界级别 <a class="header-anchor" href="#_1-世界级别" aria-label="Permalink to &quot;1. 世界级别&quot;">​</a></h3><p>加载世界级的 geoJson 即可展示 3D 世界地图</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce20c1ba64544b318d9d18d10234479b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2120&amp;h=1000&amp;s=407749&amp;e=png&amp;b=050b2f" alt="image.png"></p><blockquote><p>注意：在渲染世界地图的时候，出现了一个奇怪的问题，在配置世界地图上的国家名称时出现了错误，下述说明</p></blockquote><h3 id="_2-国家级别" tabindex="-1">2. 国家级别 <a class="header-anchor" href="#_2-国家级别" aria-label="Permalink to &quot;2. 国家级别&quot;">​</a></h3><p>加载国家级的 geoJson 即可展示 3D 国家版地图，例如：中国地图</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b76f9a4a47ff40dc9a89ed05dbbefb0b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1600&amp;h=1164&amp;s=240208&amp;e=png&amp;b=050a2e" alt="image.png"></p><h3 id="_3-省份级别" tabindex="-1">3. 省份级别 <a class="header-anchor" href="#_3-省份级别" aria-label="Permalink to &quot;3. 省份级别&quot;">​</a></h3><p>加载省份级的 geoJson 即可展示 3D 省份地图，例如：山东省地图</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46007fae16804adcb4b0e232f2e082b9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1826&amp;h=1036&amp;s=196998&amp;e=png&amp;b=050b30" alt="image.png"></p><h3 id="_4-市区级别" tabindex="-1">4. 市区级别 <a class="header-anchor" href="#_4-市区级别" aria-label="Permalink to &quot;4. 市区级别&quot;">​</a></h3><p>加载市区级的 geoJson 即可展示 3D 市区地图，例如：青岛市地图</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2b4d5c4fa0140c5ad06ae034ec5f506~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1604&amp;h=1158&amp;s=145732&amp;e=png&amp;b=04082b" alt="image.png"></p><p>省级和城市级地图可能需要额外的处理，例如缩放和定位，以确保地图在 3D 视图中正确显示。此外，由于 echarts-gl 的设计，一些地图数据可能需要额外的调整才能在 3D 模式下正确渲染。</p><blockquote><p>请注意：每个地图的 map 属性应该匹配你注册的地图数据的名称，如果你自己创建了地图数据并注册到 ECharts，那么 map 的值应该是你注册时所使用的名称。</p></blockquote><p>最终预览效果图如下图所示：</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c36d11244cdc49c68668020018f823ad~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=900&amp;h=528&amp;s=1779696&amp;e=gif&amp;f=142&amp;b=040829" alt="map3D1.gif"></p><h2 id="六-遇到的问题" tabindex="-1">六. 遇到的问题 <a class="header-anchor" href="#六-遇到的问题" aria-label="Permalink to &quot;六. 遇到的问题&quot;">​</a></h2><h3 id="_1-世界地图渲染国家名称-bug" tabindex="-1">1. 世界地图渲染国家名称 bug <a class="header-anchor" href="#_1-世界地图渲染国家名称-bug" aria-label="Permalink to &quot;1. 世界地图渲染国家名称 bug&quot;">​</a></h3><p>当配置地图上显示国家或城市名称时，我们只需要配置 <code>label.show</code> 为 <code>true</code> 即可，但是当我配置世界地图显示国家名称时，却出现了意外情况。</p><p>国家名称不显示，然而控制台还打印了警告信息，如下图所示：</p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/a4fe92be526d4125aa74651439285f57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW55dXA=:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiNDIzMDU3NjQ3MjU4OTk3NiJ9&amp;rk3s=f64ab15b&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1726033654&amp;x-orig-sign=NpMWDCh1UX2ZNopKLt53j0GLwGQ%3D" alt="image.png"></p><p>那我们来搜一下，这是个什么错误，应该怎么解决？在经过了一系列的查询之后，终于在 github 官方 issue 下找寻到了同样的问题。</p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/31b57a3bf0b240758d59385f4e001dbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW55dXA=:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiNDIzMDU3NjQ3MjU4OTk3NiJ9&amp;rk3s=f64ab15b&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1726033654&amp;x-orig-sign=QQuecXZb1sPLsTX22N0OkfPWixU%3D" alt="image.png"></p><p>github 朋友们也给出了解决方案，如下：</p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/32e6c831ff8a4f8088bfed7d8a6454cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW55dXA=:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiNDIzMDU3NjQ3MjU4OTk3NiJ9&amp;rk3s=f64ab15b&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1726033654&amp;x-orig-sign=WaTmomVMk28PC1JPlCTNKa1EFEM%3D" alt="image.png"></p><p>我后来又查询了一下，世界地图的 geoJson 数据确实有两条 name 为空的数据，过滤一下即可得到以下异常数据：</p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/dcb951f7b5f74c688b22b77472950ebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYW55dXA=:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiNDIzMDU3NjQ3MjU4OTk3NiJ9&amp;rk3s=f64ab15b&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1726033654&amp;x-orig-sign=hlERkBBQj05GKy%2FWowtXbxD%2FNzI%3D" alt="image.png"></p><h2 id="七-码上掘金演示" tabindex="-1">七. 码上掘金演示 <a class="header-anchor" href="#七-码上掘金演示" aria-label="Permalink to &quot;七. 码上掘金演示&quot;">​</a></h2><p>所有代码片段已上传至码上掘金，复制源码即可运行，部分代码已添加注释，感兴趣的掘友可参考，如下所示：</p><p><a href="https://code.juejin.cn/pen/7386861652676706341" target="_blank" rel="noreferrer">jcode</a></p><h2 id="八-总结" tabindex="-1">八. 总结 <a class="header-anchor" href="#八-总结" aria-label="Permalink to &quot;八. 总结&quot;">​</a></h2><p>通过本篇文章的介绍，相信我们大家都掌握了如何使用 ECharts 和 ECharts-GL 来构建世界级、国家级以及省市级的 3D 地图，更重要的是，本篇文章也是开启你从二维地图迈向三维世界的开端，让你从零到一，循序渐进的完整实现各种 3D 地图的渲染！</p><p>ECharts-GL 不仅提供了强大的 3D 渲染引擎，还支持高度定制化的地图样式和动态交互，使得数据可视化不再局限于图表和表格，因此在接下来的文章中，我将继续探索 ECharts-GL 在 3D 可视化大屏中的的应用，敬请关注！</p><h2 id="九-参考文档" tabindex="-1">九. 参考文档 <a class="header-anchor" href="#九-参考文档" aria-label="Permalink to &quot;九. 参考文档&quot;">​</a></h2><ul><li><a href="https://echarts.apache.org/zh/option-gl.html" target="_blank" rel="noreferrer">echarts-gl 官方文档</a></li></ul>`,111);function e(E,r,d,g,c,y){const s=h("ArticleFooter");return l(),a("div",null,[k,n(s,{link:"https://juejin.cn/post/7388281982985699363"})])}const F=i(t,[["render",e]]);export{m as __pageData,F as default};
